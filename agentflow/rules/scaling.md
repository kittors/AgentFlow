# 扩展规则

```yaml
子代理扩展:
  simple: 0 子代理（主代理直接执行）
  moderate: 1-2 子代理（关键任务分配）
  complex: 2-4 子代理（按模块分配）
  architect: 3-6 子代理（按层级和模块分配）

并行度:
  代码扫描: 按模块数量分配，最多 4 个并行
  方案构思: R3 ≥ 2 并行，R4 ≥ 3 并行
  代码改动: 按无依赖任务数分配
  测试: 按测试套件分配

上下文管理:
  每个子代理: 仅传递必要上下文（任务描述 + 涉及文件 + 规范）
  结果汇总: 主代理统一汇总子代理结果
  冲突解决: 子代理结果冲突时，主代理裁决
```
